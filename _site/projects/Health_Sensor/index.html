<!-- This layout is used in all pages. Making changes here will efect all pages. We recommend not to change anything here. --> <!DOCTYPE html><html lang="en"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" /><link rel="dns-prefetch" href="//fonts.googleapis.com" /><link rel="dns-prefetch" href="//google-analytics.com" /><link rel="dns-prefetch" href="//www.google-analytics.com" /><link rel="dns-prefetch" href="//maxcdn.bootstrapcdn.com" /><link rel="dns-prefetch" href="//ajax.googleapis.com" /><link rel="dns-prefetch" href="//fonts.gstatic.com" /><title>World Health Sensor | Carol Calderon Portfolio</title><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="World Health Sensor" /><meta property="og:locale" content="en_US" /><meta name="description" content="Data Analytics" /><meta property="og:description" content="Data Analytics" /><link rel="canonical" href="http://localhost:4000/projects/Health_Sensor/" /><meta property="og:url" content="http://localhost:4000/projects/Health_Sensor/" /><meta property="og:site_name" content="Carol Calderon Portfolio" /><meta property="og:image" content="http://localhost:4000/assets/images/whsp.png" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-09-10T00:00:00-04:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="http://localhost:4000/assets/images/whsp.png" /><meta property="twitter:title" content="World Health Sensor" /><script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-09-10T00:00:00-04:00","datePublished":"2023-09-10T00:00:00-04:00","description":"Data Analytics","headline":"World Health Sensor","image":"http://localhost:4000/assets/images/whsp.png","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/projects/Health_Sensor/"},"url":"http://localhost:4000/projects/Health_Sensor/"}</script><link rel="stylesheet" href="/assets/css/main-default.css" /><link id="color-scheme" rel="stylesheet" href="/assets/css/main-blue.css" /><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/apple-icon-60x60.png" /><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/apple-icon-114x114.png" /><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/apple-icon-152x152.png" /><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/android-icon-192x192.png" /><link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" /><link rel="icon" href="/favicon.ico" type="image/x-icon" /><script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML" ></script><script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script></head><body><div class="loader"><div class="lds-ring"><div></div><div></div><div></div><div></div></div></div><div class="wrapper"><div class="container-grid"><div class="sidebar"><div class="author-container shadow"><div class="author"> <a href="/"> <img src="/assets/images/photo.png" width="100%" height="auto;" alt="Carol Calderon Portfolio"loading="lazy" /> </a></div><div class="about text-center"><h1 class="title"><a href="/">Carol Calderon</a></h1></div><div class="bio text-center"><p class="m0">Data Scientist</p></div><hr class="dashed"><div class="social text-center"> <ul class="portfolio p0"> <li><a href="/projects/">Projects</a></li> <li><a href="/blog/">Blog</a></li> <li><a href="/contact/">Contact</a></li> </ul> <ul class="sm p0 m0a"> <li><a href="https://www.linkedin.com/in/carolcalderon/"><i class="fa fa-linkedin"></i></a></li> <li><a href="https://github.com/CarolMargeth"><i class="fa fa-github"></i></a></li> </ul></div></div></div><div class="main"><div class="main-container shadow"><div class="title-space"> <h1>World Health Sensor</h1><div class="input-group mb-3" data-aos="zoom-in"> <input type="text" class="form-control border-right-0" id="search-input" /><div class="input-group-append"> <span class="input-group-text" ><i class="fa fa-search"></i ></span></div></div></div><hr class="dashed" /> <main> <ul class="breadcrumbs"> <li><a href="/">Home</a></li> <li> <a href="/projects" >Projects</a > </li> <li> <a href="#" >Health_sensor</a > </li> </ul><div class="meta" data-aos="fade-up"> <p> <small> <span> <i class="fa fa-calendar" aria-hidden="true"></i> 10 Sep 2023&nbsp; </span> <span> <i class="fa fa-user" aria-hidden="true"></i> &nbsp; </span> <span> <i class="fa fa-clock-o" aria-hidden="true"></i> 48 mins read. </span> </small> </p></div><div class="featured-image rounded shadow" style="background-image: url(/assets/images/whsp.png)" data-aos="zoom-in" ></div><div class="container"> <article> <ul class="toc"> <li><a href="#objective">Objective</a></li> <li><a href="#project-steps">Project steps</a></li> <li><a href="#project-tools">Project Tools</a> <ul> <li><a href="#1-select-the-data-source">1. Select the Data Source</a></li> <li><a href="#2-understanding-the-api">2. Understanding the API</a></li> <li><a href="#3-retrieve-and-preprocess-data">3. Retrieve and Preprocess Data:</a></li> <li><a href="#31-retrieving">3.1 Retrieving</a> <ul> <li><a href="#retrieving-all-dimension-values-for-country-dimension">Retrieving all Dimension Values for Country dimension</a></li> <li><a href="#retrieving-all-indicators-list-of-indicators">Retrieving all Indicators (list of indicators)</a></li> <li><a href="#retrieving-tobacco-indicators">Retrieving Tobacco indicators</a></li> <li><a href="#summarizing-the-indicators-exploration">Summarizing the indicators exploration:</a></li> <li><a href="#indicators-dataframes">Indicators Dataframes</a></li> </ul> </li> <li><a href="#32-prepocessing">3.2 Prepocessing</a> <ul> <li><a href="#countries">Countries</a></li> <li><a href="#estimate-average-smoking-prevalence">Estimate Average Smoking Prevalence</a></li> <li><a href="#mpower-indicators">MPOWER indicators</a></li> <li><a href="#premature-deaths-due-to-noncommunicable-diseases-ncd-as-a-proportion-of-all-ncd-deaths">Premature deaths due to noncommunicable diseases (NCD) as a proportion of all NCD deaths</a></li> <li><a href="#merging">Merging</a></li> </ul> </li> <li><a href="#4-visualizations">4. Visualizations</a></li> <li><a href="#5-design-the-dashboard">5. Design the Dashboard</a> <ul> <li><a href="#dashboard-description">Dashboard description</a></li> </ul> </li> <li><a href="#6-deploy-the-dashboard">6. Deploy the Dashboard</a> <ul> <li><a href="#steps-to-deploy-the-dash-application-using-ec2-aws-instance">Steps to deploy the dash application using EC2 AWS instance</a></li> </ul> </li> </ul> </li> <li><a href="#application-link">Application link</a></li> <li><a href="#sources">Sources</a></li> <li><a href="#acknowledgments">Acknowledgments</a></li> </ul> <h2 id="objective">Objective</h2> <p>Using The Global Health Observatory OData API to fetch data from it’s data collection. Analyze the data using data science techniques and create an interactive dashboard and deploying it using cloud services.</p> <h2 id="project-steps">Project steps</h2> <ol> <li> <p>Select the Data Source: Determine the specific API that provides the data needed for the analysis. Explore available public datasets. Determine the analysis goals.</p> </li> <li> <p>Understand the API: Study the documentation of the OData API to understand its endpoints, query parameters, and how to retrieve data. Identify the available resources, data models, and relationships between entities.</p> </li> <li> <p>Retrieve and Preprocess Data: Use the OData API to fetch the required data based on the analysis goals. Apply data preprocessing steps like cleaning, filtering, and transforming the data as necessary to prepare it for analysis.</p> </li> <li> <p>Analyze the Data: Utilize data science techniques and libraries such as pandas, stats to perform exploratory data analysis (EDA), statistical analysis and visualizations. Extract meaningful insights and identify patterns or correlations in the data. Select the appropriate visualization tool like Matplotlib, Seaborn, or Plotly to create interactive and informative visualizations.</p> </li> <li> <p>Design the application/dashboard: Design the user interface and layout of the dashboard using Dash library. Create an intuitive and user-friendly dashboard that allows users to interact with the visualizations, apply filters, and explore the data dynamically. Iterate on the design and make improvements based on user input and additional data analysis requirements.</p> </li> <li> <p>Deploy the Dashboard: Host the dashboard on a web server or a cloud platform to make it accessible online. This involves deploying it as a web application utilizing AWS cloud hosting services. Test and Iterate: Test the functionality and usability of the dashboard, seeking feedback from potential users.</p> </li> </ol> <h2 id="project-tools">Project Tools</h2> <p>Data Source:</p> <ul> <li>The Global Health Observatory <a href="https://www.who.int/data/gho">https://www.who.int/data/gho</a></li> <li>OData API documentation: <a href="https://www.who.int/data/gho/info/gho-odata-api">https://www.who.int/data/gho/info/gho-odata-api</a></li> </ul> <p>Retrieve the data:</p> <ul> <li><strong>requests</strong> to make HTTP requests to the OData API and retrieve the data.</li> <li>Pandas: Perform data preprocessing, cleaning, filtering, and transformation using the powerful data manipulation capabilities of pandas.</li> </ul> <p>Analyze the Data:</p> <ul> <li>Pandas: Utilize pandas for exploratory data analysis (EDA), data wrangling, and statistical analysis on the retrieved data.</li> <li>Stats: Module that contains correlation functions and statistical tests among other fuctions.</li> </ul> <p>Visualization Tools:</p> <ul> <li>Matplotlib: Create static visualizations such as line plots, bar charts, and scatter plots.</li> <li>Seaborn: Build aesthetically pleasing and informative statistical visualizations.</li> <li>Plotly: Develop interactive and customizable visualizations, including interactive charts and dashboards.</li> </ul> <p>Design the Dashboard:</p> <ul> <li>Dash: Useful to build interactive web-based dashboards using Python and HTML components.</li> </ul> <p>Deploy the Dashboard:</p> <ul> <li>AWS cloud services</li> <li>TMUX library.</li> </ul> <p>Test and Iterate:</p> <ul> <li>User feedback and testing: Gather feedback from potential users and testers to improve the functionality and user experience of your dashboard.</li> <li>Jupyter Notebook or documentation: Document the project, including the data analysis process, code, and key findings.</li> </ul> <h3 id="1-select-the-data-source">1. Select the Data Source</h3> <p>What I found exploring the GHO Data Collection:</p> <ul> <li>The GHO data repository serves as the World Health Organization’s (WHO) portal to health-related statistics concerning its 194 Member States.</li> <li>The Data could be explored by Theme, Category or Indicator.</li> <li>The GHO data repository offers access to a wide range of health indicators, exceeding 2000 in number.</li> <li>Indicators cover crucial health topics such as mortality, disease burden, Millennium Development Goals, non-communicable diseases, infectious diseases, health systems, environmental health, violence, injuries, and equity, among others.</li> <li>Several indicators do not contain data or the data is not updated or completed.</li> </ul> <h3 id="2-understanding-the-api">2. Understanding the API</h3> <p>The Global Health Observatory (GHO) is constructed using a technology called RESTful web service. REST stands for Representational State Transfer, which is an architectural style used to design networked applications. In this context, GHO uses RESTful web services as the underlying technology to provide access to its data.</p> <p>RESTful web services use standard HTTP methods (such as GET, POST, PUT, DELETE) to interact with resources (data) over the internet. These resources are identified by URLs, and the web service responds with data in a structured format, often in JSON or XML.</p> <p>By using a RESTful web service, the Global Health Observatory can allow users to easily retrieve health-related data through standard web protocols, making it accessible and interoperable across various platforms and programming languages. This approach enables efficient data access and manipulation, making it convenient for data analysts and developers to fetch and utilize the health data provided by the GHO.</p> <ul> <li>The documentation is clear and extensive.</li> </ul> <h3 id="3-retrieve-and-preprocess-data">3. Retrieve and Preprocess Data:</h3> <p>Use the OData API to fetch the required data based on the analysis goals. Apply data preprocessing steps like cleaning, filtering, and transforming the data as necessary to prepare it for analysis.</p> <h3 id="31-retrieving">3.1 Retrieving</h3><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Import the libraries
</span>
<span class="kn">import</span> <span class="n">pandas</span> <span class="k">as</span> <span class="n">pd</span>
<span class="kn">import</span> <span class="n">requests</span>
<span class="kn">import</span> <span class="n">json</span>
<span class="kn">import</span> <span class="n">plotly.express</span> <span class="k">as</span> <span class="n">px</span>
<span class="kn">import</span> <span class="n">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="n">seaborn</span> <span class="k">as</span> <span class="n">sns</span>
<span class="kn">from</span> <span class="n">scipy</span> <span class="kn">import</span> <span class="n">stats</span>

</code></pre></div></div><p>GET request to obtain the dimension data directly from the Global Health Observatory API</p> <h4 id="retrieving-all-dimension-values-for-country-dimension">Retrieving all Dimension Values for Country dimension</h4><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Send a GET request to the API endpoint
</span><span class="n">url</span> <span class="o">=</span> <span class="sh">"</span><span class="s">https://ghoapi.azureedge.net/api/DIMENSION/COUNTRY/DimensionValues</span><span class="sh">"</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="c1"># Check the response status code
</span><span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="nf">json</span><span class="p">()</span>
    <span class="n">data_countries</span> <span class="o">=</span> <span class="n">resp</span><span class="p">[</span><span class="sh">'</span><span class="s">value</span><span class="sh">'</span><span class="p">]</span>
    <span class="c1"># Process the data as needed
</span>    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">data_countries</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">item</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">'</span><span class="s">Request Successful</span><span class="sh">'</span><span class="p">)</span>
        <span class="c1"># Process each item in the data
</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Request failed with status code:</span><span class="sh">"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
</code></pre></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Request Successful
</code></pre></div></div><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Create a countries DataFrame
</span><span class="n">countries</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nc">DataFrame</span><span class="p">(</span><span class="n">data_countries</span><span class="p">)</span>
<span class="n">countries</span><span class="p">.</span><span class="nf">info</span><span class="p">()</span>
</code></pre></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 248 entries, 0 to 247
Data columns (total 6 columns):
 #   Column           Non-Null Count  Dtype 
---  ------           --------------  ----- 
 0   Code             248 non-null    object
 1   Title            248 non-null    object
 2   Dimension        248 non-null    object
 3   ParentDimension  242 non-null    object
 4   ParentCode       242 non-null    object
 5   ParentTitle      242 non-null    object
dtypes: object(6)
memory usage: 11.8+ KB
</code></pre></div></div><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">countries</span><span class="p">.</span><span class="nf">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</code></pre></div></div><div> <style scoped=""> .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } </style> <table border="1" class="dataframe"> <thead> <tr style="text-align: right;"> <th></th> <th>Code</th> <th>Title</th> <th>Dimension</th> <th>ParentDimension</th> <th>ParentCode</th> <th>ParentTitle</th> </tr> </thead> <tbody> <tr> <th>0</th> <td>ABW</td> <td>Aruba</td> <td>COUNTRY</td> <td>REGION</td> <td>AMR</td> <td>Americas</td> </tr> <tr> <th>1</th> <td>AFG</td> <td>Afghanistan</td> <td>COUNTRY</td> <td>REGION</td> <td>EMR</td> <td>Eastern Mediterranean</td> </tr> <tr> <th>2</th> <td>AGO</td> <td>Angola</td> <td>COUNTRY</td> <td>REGION</td> <td>AFR</td> <td>Africa</td> </tr> <tr> <th>3</th> <td>AIA</td> <td>Anguilla</td> <td>COUNTRY</td> <td>REGION</td> <td>AMR</td> <td>Americas</td> </tr> <tr> <th>4</th> <td>ALB</td> <td>Albania</td> <td>COUNTRY</td> <td>REGION</td> <td>EUR</td> <td>Europe</td> </tr> </tbody> </table></div><h4 id="retrieving-all-indicators-list-of-indicators">Retrieving all Indicators (list of indicators)</h4><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Send a GET request to the API endpoint
</span><span class="n">url</span> <span class="o">=</span> <span class="sh">"</span><span class="s">https://ghoapi.azureedge.net/api/Indicator</span><span class="sh">"</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="c1"># Check the response status code
</span><span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
    <span class="n">resp</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="nf">json</span><span class="p">()</span>
    <span class="n">data_indicators</span> <span class="o">=</span> <span class="n">resp</span><span class="p">[</span><span class="sh">'</span><span class="s">value</span><span class="sh">'</span><span class="p">]</span>
    <span class="c1"># Process the data as needed
</span>    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">data_indicators</span><span class="p">:</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">item</span>
        <span class="n">value</span> <span class="c1">#print to see values
</span>        <span class="c1"># Process each item in the data
</span>
<span class="k">else</span><span class="p">:</span>
    <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Request failed with status code:</span><span class="sh">"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>
</code></pre></div></div><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Create a indicators DataFrame
</span>
<span class="n">indicators</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nc">DataFrame</span><span class="p">(</span><span class="n">data_indicators</span><span class="p">)</span>

<span class="n">indicators</span><span class="p">.</span><span class="nf">info</span><span class="p">()</span>

</code></pre></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 2369 entries, 0 to 2368
Data columns (total 3 columns):
 #   Column         Non-Null Count  Dtype 
---  ------         --------------  ----- 
 0   IndicatorCode  2369 non-null   object
 1   IndicatorName  2369 non-null   object
 2   Language       2369 non-null   object
dtypes: object(3)
memory usage: 55.6+ KB
</code></pre></div></div><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">pd</span><span class="p">.</span><span class="nf">set_option</span><span class="p">(</span><span class="sh">'</span><span class="s">display.max_colwidth</span><span class="sh">'</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span>
<span class="n">indicators</span><span class="p">.</span><span class="nf">sample</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
</code></pre></div></div><div> <style scoped=""> .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } </style> <table border="1" class="dataframe"> <thead> <tr style="text-align: right;"> <th></th> <th>IndicatorCode</th> <th>IndicatorName</th> <th>Language</th> </tr> </thead> <tbody> <tr> <th>1295</th> <td>SA_0000001512</td> <td>Advertising restrictions at cinemas</td> <td>EN</td> </tr> <tr> <th>735</th> <td>NCD_CCS_palliative_home</td> <td>General availability of palliative care in community or home-based care in the public health system</td> <td>EN</td> </tr> <tr> <th>1333</th> <td>SA_0000001534</td> <td>On-premise sales restrictions on outlet density</td> <td>EN</td> </tr> <tr> <th>495</th> <td>GOE_Q178</td> <td>Individuals have the legal right to specify which health-related data from their EHR can be shared with health professionals of their choice</td> <td>EN</td> </tr> <tr> <th>1709</th> <td>TOTENV_1</td> <td>Deaths attributable to the environment</td> <td>EN</td> </tr> <tr> <th>638</th> <td>MDG_0000000015</td> <td>Prevalence of condom use by adults during higher-risk sex (15-49) (%)</td> <td>EN</td> </tr> <tr> <th>967</th> <td>RADON_Q702</td> <td>Mandatory mitigation measures if legal value is exceeded (existing buildings)</td> <td>EN</td> </tr> <tr> <th>1474</th> <td>SA_0000001739_ARCHIVED</td> <td>Alcohol, heavy episodic drinking (15+) past 30 days (%), age-standardized with 95%CI</td> <td>EN</td> </tr> <tr> <th>871</th> <td>OCC_8</td> <td>Occupational airborne particulates attributable DALYs per 100'000 capita</td> <td>EN</td> </tr> <tr> <th>470</th> <td>GOE_Q138</td> <td>Lack of suitable courses available</td> <td>EN</td> </tr> </tbody> </table></div><p>The number of indicators is really high. Previous exploration of the data (directly in the website) showed that a lot of those indicators do not contain updated data or have several NaN values.</p> <p>The API is working accordingly and I am pulling the data. Nevertheless the GHO website is not totally coherent with the list of indicators I am working with through the API. This add complexity to the process, considering it is relevant to find the indicator description. Additional description about it could be found in the extended version of this project.</p><div class="alert alert-block alert-info"> Initially, I named the project the "World Health Sensor Project" because I aimed to work with reliable and comprehensive global health data. As I progressed, I narrowed my focus to tobacco-related data. However, the project has the potential for expansion to include analysis and communication of various other global health topics and indicators found in the GHO repository.</div><h4 id="retrieving-tobacco-indicators">Retrieving Tobacco indicators</h4> <p>Tobacco use is indeed a significant contributor to a wide range of non-communicable diseases (NCDs) and is a leading cause of preventable illness and death worldwide. Non-communicable diseases are chronic conditions that are not caused by infectious agents but rather result from a combination of genetic, lifestyle, and environmental factors. These diseases include cardiovascular diseases (like heart disease and stroke), cancer, chronic respiratory diseases (such as chronic obstructive pulmonary disease), and diabetes. <a href="'https://www.cdc.gov/globalhealth/healthprotection/ncd/tobacco.html'">Division of Global Health Protection, Global Health, Centers for Disease Control and Prevention</a>.</p> <p>The harmful effects of tobacco use are primarily attributed to the various toxic substances present in tobacco products, such as nicotine, tar, and carbon monoxide. These substances can damage organs and tissues in the body and increase the risk of developing NCDs. It’s also worth noting that secondhand smoke exposure, which occurs when non-smokers breathe in smoke from tobacco products, is also harmful and can lead to similar health risks.</p> <p>According with <a href="https://cancer.ca/en/cancer-information/reduce-your-risk/live-smoke-free/what-you-need-to-know-about-second-hand-smoke">Canadian Cancer Society</a> Second-hand smoke is what smokers breathe out and into the air. It’s also the smoke that comes from a burning cigarette, cigar or pipe. Second-hand smoke has the same chemicals in it as the tobacco smoke breathed in by a smoker. Hundreds of the chemicals in second-hand smoke are toxic. More than 70 of them have been shown to cause cancer in human studies or lab tests. Every year, about 800 Canadian non-smokers die from second-hand smoke.</p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Looking for the indicators related with 'Tobacco'
</span>
<span class="n">Tobacco_indicators</span> <span class="o">=</span> <span class="n">indicators</span><span class="p">[</span><span class="n">indicators</span><span class="p">[</span><span class="sh">'</span><span class="s">IndicatorName</span><span class="sh">'</span><span class="p">].</span><span class="nb">str</span><span class="p">.</span><span class="nf">contains</span><span class="p">(</span><span class="sh">'</span><span class="s">tobacco</span><span class="sh">'</span><span class="p">,</span> <span class="n">case</span><span class="o">=</span><span class="bp">False</span><span class="p">)]</span>

<span class="n">Tobacco_indicators</span><span class="p">.</span><span class="nf">sample</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</code></pre></div></div><div> <style scoped=""> .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } </style> <table border="1" class="dataframe"> <thead> <tr style="text-align: right;"> <th></th> <th>IndicatorCode</th> <th>IndicatorName</th> <th>Language</th> </tr> </thead> <tbody> <tr> <th>979</th> <td>Rev_imp_other</td> <td>Annual tax revenues - import duties and all other taxes (excluding corporate taxes on tobacco companies)</td> <td>EN</td> </tr> <tr> <th>2281</th> <td>R_admin_tax_stamps_other</td> <td>Tax stamps, fiscal marks, banderole or other types of marking are applied on other tobacco products</td> <td>EN</td> </tr> <tr> <th>1769</th> <td>W14_harm_effects_C</td> <td>Do health warnings on smokeless tobacco packaging describe the harmful effects of tobacco use on health?</td> <td>EN</td> </tr> <tr> <th>112</th> <td>E12_compliance</td> <td>Compliance of ban on brand name of non-tobacco products used for tobacco product</td> <td>EN</td> </tr> <tr> <th>1931</th> <td>R_earmarking</td> <td>Reported use of earmarked tobacco taxes</td> <td>EN</td> </tr> </tbody> </table></div><p>The indicators related with Tobacco are divided by groups according with the strategy MPOWER. “These measures are intended to assist in the country-level implementation of effective interventions to reduce the demand for tobacco, contained in the WHO FCTC.” <a href="'https://www.who.int/initiatives/mpower'">Read more clicking here</a></p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">Tobacco_indicators</span><span class="p">.</span><span class="nf">info</span><span class="p">()</span>
</code></pre></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Int64Index: 137 entries, 47 to 2354
Data columns (total 3 columns):
 #   Column         Non-Null Count  Dtype 
---  ------         --------------  ----- 
 0   IndicatorCode  137 non-null    object
 1   IndicatorName  137 non-null    object
 2   Language       137 non-null    object
dtypes: object(3)
memory usage: 4.3+ KB
</code></pre></div></div><p>There are 137 indicators related with ‘Tobacco’, I’ll choose some on them to explore the data available</p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Look for the MPOWER group indicators
</span><span class="n">MPOWER_indicators</span> <span class="o">=</span> <span class="n">Tobacco_indicators</span><span class="p">[</span><span class="n">Tobacco_indicators</span><span class="p">[</span><span class="sh">'</span><span class="s">IndicatorCode</span><span class="sh">'</span><span class="p">].</span><span class="nb">str</span><span class="p">.</span><span class="nf">contains</span><span class="p">(</span><span class="sa">r</span><span class="sh">'</span><span class="s">^[A-Za-z]_Group</span><span class="sh">'</span><span class="p">,</span> <span class="n">case</span><span class="o">=</span><span class="bp">False</span><span class="p">)]</span>
<span class="n">MPOWER_indicators</span>
</code></pre></div></div><div> <style scoped=""> .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } </style> <table border="1" class="dataframe"> <thead> <tr style="text-align: right;"> <th></th> <th>IndicatorCode</th> <th>IndicatorName</th> <th>Language</th> </tr> </thead> <tbody> <tr> <th>104</th> <td>E_Group</td> <td>Enforcing bans on tobacco advertising, promotion and sponsorship</td> <td>EN</td> </tr> <tr> <th>615</th> <td>M_Group</td> <td>Monitoring tobacco use and prevention policies</td> <td>EN</td> </tr> <tr> <th>837</th> <td>O_Group</td> <td>Offering help to quit tobacco use</td> <td>EN</td> </tr> <tr> <th>881</th> <td>P_Group</td> <td>Protecting people from tobacco smoke</td> <td>EN</td> </tr> <tr> <th>935</th> <td>R_Group</td> <td>Raising taxes on tobacco</td> <td>EN</td> </tr> <tr> <th>1751</th> <td>W_Group</td> <td>Warning about the dangers of tobacco</td> <td>EN</td> </tr> </tbody> </table></div><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Let's explore indicator related with prevalence
</span>
<span class="n">Tobacco_prevalence</span> <span class="o">=</span> <span class="n">Tobacco_indicators</span><span class="p">[</span><span class="n">Tobacco_indicators</span><span class="p">[</span><span class="sh">'</span><span class="s">IndicatorName</span><span class="sh">'</span><span class="p">].</span><span class="nb">str</span><span class="p">.</span><span class="nf">contains</span><span class="p">(</span><span class="sh">'</span><span class="s">prevalence</span><span class="sh">'</span><span class="p">,</span> <span class="n">case</span><span class="o">=</span><span class="bp">False</span><span class="p">)]</span>

<span class="n">Tobacco_prevalence</span>

</code></pre></div></div><div> <style scoped=""> .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } </style> <table border="1" class="dataframe"> <thead> <tr style="text-align: right;"> <th></th> <th>IndicatorCode</th> <th>IndicatorName</th> <th>Language</th> </tr> </thead> <tbody> <tr> <th>614</th> <td>M_Est_tob_curr</td> <td>Estimate of current tobacco use prevalence (%)</td> <td>EN</td> </tr> <tr> <th>1942</th> <td>Adult_curr_smokeless</td> <td>Prevalence of current smokeless tobacco use among adults (%)</td> <td>EN</td> </tr> <tr> <th>2001</th> <td>Yth_daily_smokeless</td> <td>Prevalence of daily smokeless tobacco use among adolescents (%)</td> <td>EN</td> </tr> <tr> <th>2070</th> <td>M_Est_smk_curr</td> <td>Estimate of current tobacco smoking prevalence (%)</td> <td>EN</td> </tr> <tr> <th>2076</th> <td>Adult_daily_smokeless</td> <td>Prevalence of daily smokeless tobacco use among adults (%)</td> <td>EN</td> </tr> <tr> <th>2123</th> <td>Yth_daily_tob_smoking</td> <td>Prevalence of daily tobacco smoking among adolescents (%)</td> <td>EN</td> </tr> <tr> <th>2160</th> <td>Adult_curr_tob_smoking</td> <td>Prevalence of current tobacco smoking among adults (%)</td> <td>EN</td> </tr> <tr> <th>2163</th> <td>Yth_curr_smokeless</td> <td>Prevalence of current smokeless tobacco use among adolescents (%)</td> <td>EN</td> </tr> <tr> <th>2180</th> <td>Adult_curr_tob_use</td> <td>Prevalence of current tobacco use among adults (%)</td> <td>EN</td> </tr> <tr> <th>2256</th> <td>Yth_curr_tob_use</td> <td>Prevalence of current tobacco use among adolescents (%)</td> <td>EN</td> </tr> <tr> <th>2277</th> <td>Yth_curr_tob_smoking</td> <td>Prevalence of current tobacco smoking among adolescents (%)</td> <td>EN</td> </tr> <tr> <th>2311</th> <td>M_Est_tob_curr_std</td> <td>Estimate of current tobacco use prevalence (%) (age-standardized rate)</td> <td>EN</td> </tr> <tr> <th>2324</th> <td>Adult_daily_tob_smoking</td> <td>Prevalence of daily tobacco smoking among adults (%)</td> <td>EN</td> </tr> <tr> <th>2349</th> <td>Adult_daily_tob_use</td> <td>Prevalence of daily tobacco use among adults (%)</td> <td>EN</td> </tr> <tr> <th>2354</th> <td>M_Est_smk_curr_std</td> <td>Estimate of current tobacco smoking prevalence (%) (age-standardized rate)</td> <td>EN</td> </tr> </tbody> </table></div><p>There are 15 indicators related with tobacco and prevalence.</p> <p>I used a for loop to write the urls and explore the data in all the indicators within the word ‘Prevalence’, the process is available in the extended version on GitHub. Finally, the indicator I found more interesting by the amount of data it provides was <strong>M_Est_smk_curr_std == Estimate of current tobacco use prevalence (%)</strong></p> <h4 id="summarizing-the-indicators-exploration">Summarizing the indicators exploration:</h4> <p><strong>Indicators to work with in the dashboard:</strong></p> <table> <thead> <tr> <th>Indicator Code</th> <th>Indicator Name</th> </tr> </thead> <tbody> <tr> <td>M_Est_smk_curr_std:</td> <td>Estimate of current tobacco use prevalence (%)</td> </tr> <tr> <td>M_Group:</td> <td>Monitoring tobacco use and prevention policies</td> </tr> <tr> <td>P_Group:</td> <td>Protecting people from tobacco smoke</td> </tr> <tr> <td>O_Group:</td> <td>Offering help to quit tobacco use</td> </tr> <tr> <td>W_Group:</td> <td>Warning about the dangers of tobacco</td> </tr> <tr> <td>E_Group:</td> <td>Enforcing bans on tobacco advertising, promotion and sponsorship</td> </tr> <tr> <td>R_Group:</td> <td>Raising taxes on tobacco</td> </tr> <tr> <td>NCD_UNDER70:</td> <td>Premature deaths due to noncommunicable diseases (NCD) as a proportion of all NCD deaths</td> </tr> </tbody> </table> <h4 id="indicators-dataframes">Indicators Dataframes</h4><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Create a for loop to create the urls for the indicators I found interesting.
</span>
<span class="n">IndicatorCodes</span> <span class="o">=</span> <span class="p">[</span><span class="sh">'</span><span class="s">M_Est_smk_curr_std</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">M_Group</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">P_Group</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">O_Group</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">W_Group</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">E_Group</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">R_Group</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">NCD_UNDER70</span><span class="sh">'</span><span class="p">]</span>

<span class="n">urls</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">Codes</span> <span class="ow">in</span> <span class="n">IndicatorCodes</span><span class="p">:</span>
    <span class="c1"># Create the URLs
</span>    <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="sh">"</span><span class="s">https://ghoapi.azureedge.net/api/</span><span class="si">{</span><span class="n">Codes</span><span class="si">}</span><span class="sh">"</span>
    <span class="n">urls</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
    
<span class="n">urls</span>
</code></pre></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>['https://ghoapi.azureedge.net/api/M_Est_smk_curr_std',
 'https://ghoapi.azureedge.net/api/M_Group',
 'https://ghoapi.azureedge.net/api/P_Group',
 'https://ghoapi.azureedge.net/api/O_Group',
 'https://ghoapi.azureedge.net/api/W_Group',
 'https://ghoapi.azureedge.net/api/E_Group',
 'https://ghoapi.azureedge.net/api/R_Group',
 'https://ghoapi.azureedge.net/api/NCD_UNDER70']
</code></pre></div></div><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Create a for loop to retrieve the data and transform it into dataframes
</span>
<span class="n">df_dictionary</span> <span class="o">=</span> <span class="p">{}</span>

<span class="k">for</span> <span class="n">url</span> <span class="ow">in</span> <span class="n">urls</span><span class="p">:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

    <span class="c1"># Check the response status code
</span>    <span class="k">if</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
        <span class="n">resp</span> <span class="o">=</span> <span class="n">response</span><span class="p">.</span><span class="nf">json</span><span class="p">()</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">resp</span><span class="p">[</span><span class="sh">'</span><span class="s">value</span><span class="sh">'</span><span class="p">]</span>            
        <span class="c1"># Transform the json responses into dataframes.
</span>        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nc">DataFrame</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>  
        <span class="c1"># Name the df with the indicator code 
</span>        <span class="n">df_name</span> <span class="o">=</span> <span class="sa">f</span><span class="sh">"</span><span class="s">df_</span><span class="si">{</span><span class="n">url</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sh">'</span><span class="s">/</span><span class="sh">'</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="sh">"</span>
        <span class="c1"># Include each name df into a dictionary
</span>        <span class="n">df_dictionary</span><span class="p">[</span><span class="n">df_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span>
        
    <span class="k">else</span><span class="p">:</span>
        <span class="nf">print</span><span class="p">(</span><span class="sh">"</span><span class="s">Request failed with status code:</span><span class="sh">"</span><span class="p">,</span> <span class="n">response</span><span class="p">.</span><span class="n">status_code</span><span class="p">)</span>

        <span class="c1"># print the dictionary of dataframes.        
</span><span class="nf">print</span><span class="p">(</span><span class="n">df_dictionary</span><span class="p">.</span><span class="nf">keys</span><span class="p">())</span>
</code></pre></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>dict_keys(['df_M_Est_smk_curr_std', 'df_M_Group', 'df_P_Group', 'df_O_Group', 'df_W_Group', 'df_E_Group', 'df_R_Group', 'df_NCD_UNDER70'])
</code></pre></div></div><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Extract the dfs from the dictionary
</span>
<span class="n">df_M_Est_smk_curr_std</span> <span class="o">=</span> <span class="n">df_dictionary</span><span class="p">[</span><span class="sh">'</span><span class="s">df_M_Est_smk_curr_std</span><span class="sh">'</span><span class="p">]</span>
<span class="n">df_M_Group</span> <span class="o">=</span> <span class="n">df_dictionary</span><span class="p">[</span><span class="sh">'</span><span class="s">df_M_Group</span><span class="sh">'</span><span class="p">]</span>
<span class="n">df_P_Group</span> <span class="o">=</span> <span class="n">df_dictionary</span><span class="p">[</span><span class="sh">'</span><span class="s">df_P_Group</span><span class="sh">'</span><span class="p">]</span>
<span class="n">df_O_Group</span> <span class="o">=</span> <span class="n">df_dictionary</span><span class="p">[</span><span class="sh">'</span><span class="s">df_O_Group</span><span class="sh">'</span><span class="p">]</span>
<span class="n">df_W_Group</span> <span class="o">=</span> <span class="n">df_dictionary</span><span class="p">[</span><span class="sh">'</span><span class="s">df_W_Group</span><span class="sh">'</span><span class="p">]</span>
<span class="n">df_E_Group</span> <span class="o">=</span> <span class="n">df_dictionary</span><span class="p">[</span><span class="sh">'</span><span class="s">df_E_Group</span><span class="sh">'</span><span class="p">]</span>
<span class="n">df_R_Group</span> <span class="o">=</span> <span class="n">df_dictionary</span><span class="p">[</span><span class="sh">'</span><span class="s">df_R_Group</span><span class="sh">'</span><span class="p">]</span>
<span class="n">df_NCD_UNDER70</span> <span class="o">=</span> <span class="n">df_dictionary</span><span class="p">[</span><span class="sh">'</span><span class="s">df_NCD_UNDER70</span><span class="sh">'</span><span class="p">]</span>

</code></pre></div></div><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># print the shape
</span>
<span class="k">for</span> <span class="n">df</span> <span class="ow">in</span> <span class="p">[</span><span class="n">df_M_Est_smk_curr_std</span><span class="p">,</span> <span class="n">df_M_Group</span><span class="p">,</span> <span class="n">df_P_Group</span><span class="p">,</span> <span class="n">df_O_Group</span><span class="p">,</span> <span class="n">df_W_Group</span><span class="p">,</span> <span class="n">df_E_Group</span><span class="p">,</span> <span class="n">df_R_Group</span><span class="p">,</span> <span class="n">df_NCD_UNDER70</span><span class="p">]:</span>
    <span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">'</span><span class="si">{</span><span class="n">df</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s"> rows and </span><span class="si">{</span><span class="n">df</span><span class="p">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s"> columns</span><span class="sh">'</span><span class="p">)</span>
</code></pre></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>4428 rows and 23 columns
1560 rows and 23 columns
1560 rows and 23 columns
1560 rows and 23 columns
1560 rows and 23 columns
1560 rows and 23 columns
1365 rows and 23 columns
11640 rows and 23 columns
</code></pre></div></div><p>As df_R_Group has less rows than the other groups, after joining I’ll need to fill NaN values with zeros and make the notation is when displaying this data. Fortunately, the score goes from 1 to 6, then use 0 is not mislading.</p> <h3 id="32-prepocessing">3.2 Prepocessing</h3> <p>Keep just the columns of interest and renamed to better communication</p> <h4 id="countries">Countries</h4><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Countries dataframe
</span><span class="n">countries</span><span class="p">.</span><span class="nf">head</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</code></pre></div></div><div> <style scoped=""> .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } </style> <table border="1" class="dataframe"> <thead> <tr style="text-align: right;"> <th></th> <th>Code</th> <th>Title</th> <th>Dimension</th> <th>ParentDimension</th> <th>ParentCode</th> <th>ParentTitle</th> </tr> </thead> <tbody> <tr> <th>0</th> <td>ABW</td> <td>Aruba</td> <td>COUNTRY</td> <td>REGION</td> <td>AMR</td> <td>Americas</td> </tr> <tr> <th>1</th> <td>AFG</td> <td>Afghanistan</td> <td>COUNTRY</td> <td>REGION</td> <td>EMR</td> <td>Eastern Mediterranean</td> </tr> </tbody> </table></div><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Rename the columns
</span><span class="n">countries</span><span class="p">.</span><span class="nf">rename</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">{</span><span class="sh">'</span><span class="s">Code</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">Country Code</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Title</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">Country</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">ParentTitle</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">WHO Region</span><span class="sh">'</span><span class="p">},</span> <span class="n">inplace</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
</code></pre></div></div><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Select specific columns using the .loc indexer
</span><span class="n">final_countries</span> <span class="o">=</span> <span class="n">countries</span><span class="p">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="sh">'</span><span class="s">Country Code</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Country</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">WHO Region</span><span class="sh">'</span><span class="p">]]</span>
</code></pre></div></div><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Sanity check
</span><span class="n">final_countries</span><span class="p">.</span><span class="nf">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</code></pre></div></div><div> <style scoped=""> .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } </style> <table border="1" class="dataframe"> <thead> <tr style="text-align: right;"> <th></th> <th>Country Code</th> <th>Country</th> <th>WHO Region</th> </tr> </thead> <tbody> <tr> <th>0</th> <td>ABW</td> <td>Aruba</td> <td>Americas</td> </tr> <tr> <th>1</th> <td>AFG</td> <td>Afghanistan</td> <td>Eastern Mediterranean</td> </tr> <tr> <th>2</th> <td>AGO</td> <td>Angola</td> <td>Africa</td> </tr> </tbody> </table></div><h4 id="estimate-average-smoking-prevalence">Estimate Average Smoking Prevalence</h4><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Estimate of current tobacco use prevalence (%) dataframe
</span><span class="n">df_M_Est_smk_curr_std</span><span class="p">.</span><span class="nf">head</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div></div><div> <style scoped=""> .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } </style> <table border="1" class="dataframe"> <thead> <tr style="text-align: right;"> <th></th> <th>Id</th> <th>IndicatorCode</th> <th>SpatialDimType</th> <th>SpatialDim</th> <th>TimeDimType</th> <th>TimeDim</th> <th>Dim1Type</th> <th>Dim1</th> <th>Dim2Type</th> <th>Dim2</th> <th>...</th> <th>DataSourceDim</th> <th>Value</th> <th>NumericValue</th> <th>Low</th> <th>High</th> <th>Comments</th> <th>Date</th> <th>TimeDimensionValue</th> <th>TimeDimensionBegin</th> <th>TimeDimensionEnd</th> </tr> </thead> <tbody> <tr> <th>0</th> <td>27794728</td> <td>M_Est_smk_curr_std</td> <td>COUNTRY</td> <td>DZA</td> <td>YEAR</td> <td>2020</td> <td>SEX</td> <td>BTSX</td> <td>None</td> <td>None</td> <td>...</td> <td>None</td> <td>15.2</td> <td>15.2</td> <td>None</td> <td>None</td> <td>Projected from surveys completed prior to 2020.</td> <td>2022-01-17T09:30:38.763+01:00</td> <td>2020</td> <td>2020-01-01T00:00:00+01:00</td> <td>2020-12-31T00:00:00+01:00</td> </tr> </tbody> </table> <p>1 rows × 23 columns</p></div><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Rename the columns
</span><span class="n">df_M_Est_smk_curr_std</span><span class="p">.</span><span class="nf">rename</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">{</span><span class="sh">'</span><span class="s">SpatialDim</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">Country Code</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">ParentTitle</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">WHO Region</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">TimeDim</span><span class="sh">'</span> <span class="p">:</span> <span class="sh">'</span><span class="s">Year</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Dim1</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">Sex</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Value</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">Prevalence</span><span class="sh">'</span><span class="p">},</span> <span class="n">inplace</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
</code></pre></div></div><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Select specific columns using the .loc indexer
</span><span class="n">final_prevalence</span> <span class="o">=</span> <span class="n">df_M_Est_smk_curr_std</span><span class="p">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="sh">'</span><span class="s">Country Code</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Year</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Sex</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Prevalence</span><span class="sh">'</span><span class="p">]]</span>
</code></pre></div></div><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Sanity check
</span><span class="n">final_prevalence</span><span class="p">.</span><span class="nf">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</code></pre></div></div><div> <style scoped=""> .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } </style> <table border="1" class="dataframe"> <thead> <tr style="text-align: right;"> <th></th> <th>Country Code</th> <th>Year</th> <th>Sex</th> <th>Prevalence</th> </tr> </thead> <tbody> <tr> <th>0</th> <td>DZA</td> <td>2020</td> <td>BTSX</td> <td>15.2</td> </tr> <tr> <th>1</th> <td>BEN</td> <td>2020</td> <td>BTSX</td> <td>4.7</td> </tr> <tr> <th>2</th> <td>BWA</td> <td>2020</td> <td>BTSX</td> <td>15</td> </tr> </tbody> </table></div><h4 id="mpower-indicators">MPOWER indicators</h4><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Rename the columns
</span><span class="n">df_M_Group</span><span class="p">.</span><span class="nf">rename</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">{</span><span class="sh">'</span><span class="s">SpatialDim</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">Country Code</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">ParentTitle</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">WHO Region</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">TimeDim</span><span class="sh">'</span><span class="p">:</span><span class="sh">'</span><span class="s">Year</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Value</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">M_score</span><span class="sh">'</span><span class="p">},</span> <span class="n">inplace</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
<span class="n">df_P_Group</span><span class="p">.</span><span class="nf">rename</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">{</span><span class="sh">'</span><span class="s">SpatialDim</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">Country Code</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">ParentTitle</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">WHO Region</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">TimeDim</span><span class="sh">'</span><span class="p">:</span><span class="sh">'</span><span class="s">Year</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Value</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">P_score</span><span class="sh">'</span><span class="p">},</span> <span class="n">inplace</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
<span class="n">df_O_Group</span><span class="p">.</span><span class="nf">rename</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">{</span><span class="sh">'</span><span class="s">SpatialDim</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">Country Code</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">ParentTitle</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">WHO Region</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">TimeDim</span><span class="sh">'</span><span class="p">:</span><span class="sh">'</span><span class="s">Year</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Value</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">O_score</span><span class="sh">'</span><span class="p">},</span> <span class="n">inplace</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
<span class="n">df_W_Group</span><span class="p">.</span><span class="nf">rename</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">{</span><span class="sh">'</span><span class="s">SpatialDim</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">Country Code</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">ParentTitle</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">WHO Region</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">TimeDim</span><span class="sh">'</span><span class="p">:</span><span class="sh">'</span><span class="s">Year</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Value</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">W_score</span><span class="sh">'</span><span class="p">},</span> <span class="n">inplace</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
<span class="n">df_E_Group</span><span class="p">.</span><span class="nf">rename</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">{</span><span class="sh">'</span><span class="s">SpatialDim</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">Country Code</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">ParentTitle</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">WHO Region</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">TimeDim</span><span class="sh">'</span><span class="p">:</span><span class="sh">'</span><span class="s">Year</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Value</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">E_score</span><span class="sh">'</span><span class="p">},</span> <span class="n">inplace</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
<span class="n">df_R_Group</span><span class="p">.</span><span class="nf">rename</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">{</span><span class="sh">'</span><span class="s">SpatialDim</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">Country Code</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">ParentTitle</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">WHO Region</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">TimeDim</span><span class="sh">'</span><span class="p">:</span><span class="sh">'</span><span class="s">Year</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Value</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">R_score</span><span class="sh">'</span><span class="p">},</span> <span class="n">inplace</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
</code></pre></div></div><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Select specific columns using the .loc indexer
</span><span class="n">final_M</span> <span class="o">=</span> <span class="n">df_M_Group</span><span class="p">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="sh">'</span><span class="s">Country Code</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Year</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">M_score</span><span class="sh">'</span><span class="p">]]</span>
<span class="n">final_P</span> <span class="o">=</span> <span class="n">df_P_Group</span><span class="p">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="sh">'</span><span class="s">Country Code</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Year</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">P_score</span><span class="sh">'</span><span class="p">]]</span>
<span class="n">final_O</span> <span class="o">=</span> <span class="n">df_O_Group</span><span class="p">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="sh">'</span><span class="s">Country Code</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Year</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">O_score</span><span class="sh">'</span><span class="p">]]</span>
<span class="n">final_W</span> <span class="o">=</span> <span class="n">df_W_Group</span><span class="p">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="sh">'</span><span class="s">Country Code</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Year</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">W_score</span><span class="sh">'</span><span class="p">]]</span>
<span class="n">final_E</span> <span class="o">=</span> <span class="n">df_E_Group</span><span class="p">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="sh">'</span><span class="s">Country Code</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Year</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">E_score</span><span class="sh">'</span><span class="p">]]</span>
<span class="n">final_R</span> <span class="o">=</span> <span class="n">df_R_Group</span><span class="p">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="sh">'</span><span class="s">Country Code</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Year</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">R_score</span><span class="sh">'</span><span class="p">]]</span>
</code></pre></div></div><h4 id="premature-deaths-due-to-noncommunicable-diseases-ncd-as-a-proportion-of-all-ncd-deaths">Premature deaths due to noncommunicable diseases (NCD) as a proportion of all NCD deaths</h4><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># NDC: Noncommunicable diseases
</span><span class="n">df_NCD_UNDER70</span><span class="p">.</span><span class="nf">head</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div></div><div> <style scoped=""> .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } </style> <table border="1" class="dataframe"> <thead> <tr style="text-align: right;"> <th></th> <th>Id</th> <th>IndicatorCode</th> <th>SpatialDimType</th> <th>SpatialDim</th> <th>TimeDimType</th> <th>TimeDim</th> <th>Dim1Type</th> <th>Dim1</th> <th>Dim2Type</th> <th>Dim2</th> <th>...</th> <th>DataSourceDim</th> <th>Value</th> <th>NumericValue</th> <th>Low</th> <th>High</th> <th>Comments</th> <th>Date</th> <th>TimeDimensionValue</th> <th>TimeDimensionBegin</th> <th>TimeDimensionEnd</th> </tr> </thead> <tbody> <tr> <th>0</th> <td>25578824</td> <td>NCD_UNDER70</td> <td>COUNTRY</td> <td>AFG</td> <td>YEAR</td> <td>2000</td> <td>SEX</td> <td>MLE</td> <td>GHECAUSES</td> <td>GHE060</td> <td>...</td> <td>None</td> <td>72.8 [55.8-83.5]</td> <td>72.78874</td> <td>55.84165</td> <td>83.46061</td> <td>None</td> <td>2021-03-10T15:22:19.27+01:00</td> <td>2000</td> <td>2000-01-01T00:00:00+01:00</td> <td>2000-12-31T00:00:00+01:00</td> </tr> </tbody> </table> <p>1 rows × 23 columns</p></div><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Rename the columns
</span><span class="n">df_NCD_UNDER70</span><span class="p">.</span><span class="nf">rename</span><span class="p">(</span><span class="n">columns</span> <span class="o">=</span> <span class="p">{</span><span class="sh">'</span><span class="s">SpatialDim</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">Country Code</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">TimeDim</span><span class="sh">'</span><span class="p">:</span><span class="sh">'</span><span class="s">Year</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Dim1</span><span class="sh">'</span><span class="p">:</span><span class="sh">'</span><span class="s">Sex</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">NumericValue</span><span class="sh">'</span><span class="p">:</span><span class="sh">'</span><span class="s">PrematureDeaths/NCD</span><span class="sh">'</span><span class="p">},</span> <span class="n">inplace</span> <span class="o">=</span> <span class="bp">True</span><span class="p">)</span>
</code></pre></div></div><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Select specific columns using the .loc indexer
</span><span class="n">final_premature_deaths</span> <span class="o">=</span> <span class="n">df_NCD_UNDER70</span><span class="p">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="sh">'</span><span class="s">Country Code</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Year</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Sex</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">PrematureDeaths/NCD</span><span class="sh">'</span><span class="p">]]</span>
</code></pre></div></div><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Sanity check
</span><span class="n">final_premature_deaths</span><span class="p">.</span><span class="nf">head</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</code></pre></div></div><div> <style scoped=""> .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } </style> <table border="1" class="dataframe"> <thead> <tr style="text-align: right;"> <th></th> <th>Country Code</th> <th>Year</th> <th>Sex</th> <th>PrematureDeaths/NCD</th> </tr> </thead> <tbody> <tr> <th>0</th> <td>AFG</td> <td>2000</td> <td>MLE</td> <td>72.78874</td> </tr> <tr> <th>1</th> <td>AFG</td> <td>2001</td> <td>MLE</td> <td>72.56174</td> </tr> <tr> <th>2</th> <td>AFG</td> <td>2002</td> <td>MLE</td> <td>72.96648</td> </tr> </tbody> </table></div><h4 id="merging">Merging</h4> <p>Now concatenate the dataframes, it would be great to build just 1 dataframe. However, having some columns with more and less data, concatenating all of them would get NaN values and not option to set correct datatypes.</p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Merging the DataFrames: final_countries, final_prevalence, final_MPOWER, and final_premature_deaths.
</span>
<span class="n">final_prevalence</span> <span class="o">=</span> <span class="n">final_countries</span><span class="p">.</span><span class="nf">merge</span><span class="p">(</span><span class="n">final_prevalence</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="sh">'</span><span class="s">Country Code</span><span class="sh">'</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="sh">'</span><span class="s">inner</span><span class="sh">'</span><span class="p">)</span>
<span class="n">final_premature_deaths</span> <span class="o">=</span> <span class="n">final_countries</span><span class="p">.</span><span class="nf">merge</span><span class="p">(</span><span class="n">final_premature_deaths</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">Country Code</span><span class="sh">'</span><span class="p">],</span> <span class="n">how</span><span class="o">=</span><span class="sh">'</span><span class="s">inner</span><span class="sh">'</span><span class="p">)</span>
<span class="n">final_MPOWER</span> <span class="o">=</span> <span class="n">final_countries</span><span class="p">.</span><span class="nf">merge</span><span class="p">(</span><span class="n">final_M</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">Country Code</span><span class="sh">'</span><span class="p">],</span> <span class="n">how</span><span class="o">=</span><span class="sh">'</span><span class="s">inner</span><span class="sh">'</span><span class="p">)</span>
<span class="n">final_MPOWER</span> <span class="o">=</span> <span class="n">final_MPOWER</span><span class="p">.</span><span class="nf">merge</span><span class="p">(</span><span class="n">final_P</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">Country Code</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Year</span><span class="sh">'</span><span class="p">],</span> <span class="n">how</span><span class="o">=</span><span class="sh">'</span><span class="s">inner</span><span class="sh">'</span><span class="p">)</span>
<span class="n">final_MPOWER</span> <span class="o">=</span> <span class="n">final_MPOWER</span><span class="p">.</span><span class="nf">merge</span><span class="p">(</span><span class="n">final_O</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">Country Code</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Year</span><span class="sh">'</span><span class="p">],</span> <span class="n">how</span><span class="o">=</span><span class="sh">'</span><span class="s">inner</span><span class="sh">'</span><span class="p">)</span>
<span class="n">final_MPOWER</span> <span class="o">=</span> <span class="n">final_MPOWER</span><span class="p">.</span><span class="nf">merge</span><span class="p">(</span><span class="n">final_W</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">Country Code</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Year</span><span class="sh">'</span><span class="p">],</span> <span class="n">how</span><span class="o">=</span><span class="sh">'</span><span class="s">inner</span><span class="sh">'</span><span class="p">)</span>
<span class="n">final_MPOWER</span> <span class="o">=</span> <span class="n">final_MPOWER</span><span class="p">.</span><span class="nf">merge</span><span class="p">(</span><span class="n">final_E</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">Country Code</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Year</span><span class="sh">'</span><span class="p">],</span> <span class="n">how</span><span class="o">=</span><span class="sh">'</span><span class="s">inner</span><span class="sh">'</span><span class="p">)</span>
<span class="n">final_MPOWER</span> <span class="o">=</span> <span class="n">final_MPOWER</span><span class="p">.</span><span class="nf">merge</span><span class="p">(</span><span class="n">final_R</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">Country Code</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Year</span><span class="sh">'</span><span class="p">],</span> <span class="n">how</span><span class="o">=</span><span class="sh">'</span><span class="s">outer</span><span class="sh">'</span><span class="p">)</span>

</code></pre></div></div><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">final_MPOWER</span>
</code></pre></div></div><div> <style scoped=""> .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } </style> <table border="1" class="dataframe"> <thead> <tr style="text-align: right;"> <th></th> <th>Country Code</th> <th>Country</th> <th>WHO Region</th> <th>Year</th> <th>M_score</th> <th>P_score</th> <th>O_score</th> <th>W_score</th> <th>E_score</th> <th>R_score</th> </tr> </thead> <tbody> <tr> <th>0</th> <td>AFG</td> <td>Afghanistan</td> <td>Eastern Mediterranean</td> <td>2007</td> <td>1</td> <td>3</td> <td>3</td> <td>2</td> <td>4</td> <td>NaN</td> </tr> <tr> <th>1</th> <td>AFG</td> <td>Afghanistan</td> <td>Eastern Mediterranean</td> <td>2008</td> <td>1</td> <td>3</td> <td>3</td> <td>2</td> <td>4</td> <td>2</td> </tr> <tr> <th>2</th> <td>AFG</td> <td>Afghanistan</td> <td>Eastern Mediterranean</td> <td>2010</td> <td>1</td> <td>3</td> <td>3</td> <td>2</td> <td>4</td> <td>2</td> </tr> <tr> <th>3</th> <td>AFG</td> <td>Afghanistan</td> <td>Eastern Mediterranean</td> <td>2012</td> <td>1</td> <td>3</td> <td>3</td> <td>2</td> <td>4</td> <td>2</td> </tr> <tr> <th>4</th> <td>AFG</td> <td>Afghanistan</td> <td>Eastern Mediterranean</td> <td>2014</td> <td>2</td> <td>3</td> <td>3</td> <td>2</td> <td>4</td> <td>3</td> </tr> <tr> <th>...</th> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> </tr> <tr> <th>1555</th> <td>ZWE</td> <td>Zimbabwe</td> <td>Africa</td> <td>2012</td> <td>1</td> <td>3</td> <td>3</td> <td>2</td> <td>2</td> <td>3</td> </tr> <tr> <th>1556</th> <td>ZWE</td> <td>Zimbabwe</td> <td>Africa</td> <td>2014</td> <td>2</td> <td>3</td> <td>2</td> <td>2</td> <td>2</td> <td>3</td> </tr> <tr> <th>1557</th> <td>ZWE</td> <td>Zimbabwe</td> <td>Africa</td> <td>2016</td> <td>2</td> <td>3</td> <td>4</td> <td>2</td> <td>2</td> <td>3</td> </tr> <tr> <th>1558</th> <td>ZWE</td> <td>Zimbabwe</td> <td>Africa</td> <td>2018</td> <td>2</td> <td>3</td> <td>4</td> <td>2</td> <td>2</td> <td>3</td> </tr> <tr> <th>1559</th> <td>ZWE</td> <td>Zimbabwe</td> <td>Africa</td> <td>2020</td> <td>1</td> <td>3</td> <td>4</td> <td>2</td> <td>2</td> <td>3</td> </tr> </tbody> </table> <p>1560 rows × 10 columns</p></div><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Check values in R_score:
</span><span class="n">final_MPOWER</span><span class="p">[</span><span class="sh">'</span><span class="s">R_score</span><span class="sh">'</span><span class="p">].</span><span class="nf">unique</span><span class="p">()</span>
</code></pre></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array([nan, '2', '3', '1', '4', '5', 'Not applicable'], dtype=object)
</code></pre></div></div><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Replace 'Not applicable' with '0' in 'R_score'
</span><span class="n">final_MPOWER</span><span class="p">[</span><span class="sh">'</span><span class="s">R_score</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">final_MPOWER</span><span class="p">[</span><span class="sh">'</span><span class="s">R_score</span><span class="sh">'</span><span class="p">].</span><span class="nf">replace</span><span class="p">(</span><span class="sh">'</span><span class="s">Not applicable</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">0</span><span class="sh">'</span><span class="p">)</span>

<span class="c1"># Fill NaN values with '0'
</span><span class="n">final_MPOWER</span><span class="p">[</span><span class="sh">'</span><span class="s">R_score</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">final_MPOWER</span><span class="p">[</span><span class="sh">'</span><span class="s">R_score</span><span class="sh">'</span><span class="p">].</span><span class="nf">fillna</span><span class="p">(</span><span class="sh">'</span><span class="s">0</span><span class="sh">'</span><span class="p">)</span>

<span class="c1"># Sanity check
</span><span class="n">final_MPOWER</span><span class="p">[</span><span class="sh">'</span><span class="s">R_score</span><span class="sh">'</span><span class="p">].</span><span class="nf">unique</span><span class="p">()</span>
</code></pre></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>array(['0', '2', '3', '1', '4', '5'], dtype=object)
</code></pre></div></div><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">final_prevalence</span>
</code></pre></div></div><div> <style scoped=""> .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } </style> <table border="1" class="dataframe"> <thead> <tr style="text-align: right;"> <th></th> <th>Country Code</th> <th>Country</th> <th>WHO Region</th> <th>Year</th> <th>Sex</th> <th>Prevalence</th> </tr> </thead> <tbody> <tr> <th>0</th> <td>AFG</td> <td>Afghanistan</td> <td>Eastern Mediterranean</td> <td>2020</td> <td>BTSX</td> <td>9.5</td> </tr> <tr> <th>1</th> <td>AFG</td> <td>Afghanistan</td> <td>Eastern Mediterranean</td> <td>2020</td> <td>MLE</td> <td>16.7</td> </tr> <tr> <th>2</th> <td>AFG</td> <td>Afghanistan</td> <td>Eastern Mediterranean</td> <td>2020</td> <td>FMLE</td> <td>2.2</td> </tr> <tr> <th>3</th> <td>AFG</td> <td>Afghanistan</td> <td>Eastern Mediterranean</td> <td>2005</td> <td>BTSX</td> <td>17.1</td> </tr> <tr> <th>4</th> <td>AFG</td> <td>Afghanistan</td> <td>Eastern Mediterranean</td> <td>2005</td> <td>MLE</td> <td>27.5</td> </tr> <tr> <th>...</th> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> </tr> <tr> <th>4423</th> <td>ZWE</td> <td>Zimbabwe</td> <td>Africa</td> <td>2025</td> <td>FMLE</td> <td>0.6</td> </tr> <tr> <th>4424</th> <td>ZWE</td> <td>Zimbabwe</td> <td>Africa</td> <td>2000</td> <td>BTSX</td> <td>19.5</td> </tr> <tr> <th>4425</th> <td>ZWE</td> <td>Zimbabwe</td> <td>Africa</td> <td>2000</td> <td>MLE</td> <td>36.1</td> </tr> <tr> <th>4426</th> <td>ZWE</td> <td>Zimbabwe</td> <td>Africa</td> <td>2000</td> <td>FMLE</td> <td>2.9</td> </tr> <tr> <th>4427</th> <td>ZWE</td> <td>Zimbabwe</td> <td>Africa</td> <td>2015</td> <td>FMLE</td> <td>1.2</td> </tr> </tbody> </table> <p>4428 rows × 6 columns</p></div><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Check datatypes
</span>
<span class="n">final_prevalence</span><span class="p">.</span><span class="nf">info</span><span class="p">()</span>

<span class="n">final_premature_deaths</span><span class="p">.</span><span class="nf">info</span><span class="p">()</span>

<span class="n">final_MPOWER</span><span class="p">.</span><span class="nf">info</span><span class="p">()</span>
</code></pre></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Int64Index: 4428 entries, 0 to 4427
Data columns (total 6 columns):
 #   Column        Non-Null Count  Dtype 
---  ------        --------------  ----- 
 0   Country Code  4428 non-null   object
 1   Country       4428 non-null   object
 2   WHO Region    4428 non-null   object
 3   Year          4428 non-null   int64 
 4   Sex           4428 non-null   object
 5   Prevalence    4428 non-null   object
dtypes: int64(1), object(5)
memory usage: 242.2+ KB
&lt;class 'pandas.core.frame.DataFrame'&gt;
Int64Index: 10980 entries, 0 to 10979
Data columns (total 6 columns):
 #   Column               Non-Null Count  Dtype  
---  ------               --------------  -----  
 0   Country Code         10980 non-null  object 
 1   Country              10980 non-null  object 
 2   WHO Region           10980 non-null  object 
 3   Year                 10980 non-null  int64  
 4   Sex                  10980 non-null  object 
 5   PrematureDeaths/NCD  10980 non-null  float64
dtypes: float64(1), int64(1), object(4)
memory usage: 600.5+ KB
&lt;class 'pandas.core.frame.DataFrame'&gt;
Int64Index: 1560 entries, 0 to 1559
Data columns (total 10 columns):
 #   Column        Non-Null Count  Dtype 
---  ------        --------------  ----- 
 0   Country Code  1560 non-null   object
 1   Country       1560 non-null   object
 2   WHO Region    1560 non-null   object
 3   Year          1560 non-null   int64 
 4   M_score       1560 non-null   object
 5   P_score       1560 non-null   object
 6   O_score       1560 non-null   object
 7   W_score       1560 non-null   object
 8   E_score       1560 non-null   object
 9   R_score       1560 non-null   object
dtypes: int64(1), object(9)
memory usage: 134.1+ KB
</code></pre></div></div><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Fix datatypes in M_POWER dataframe
</span>
<span class="n">final_prevalence</span><span class="p">[</span><span class="sh">'</span><span class="s">Prevalence</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">final_prevalence</span><span class="p">[</span><span class="sh">'</span><span class="s">Prevalence</span><span class="sh">'</span><span class="p">].</span><span class="nf">astype</span><span class="p">(</span><span class="nb">float</span><span class="p">)</span>
<span class="n">final_MPOWER</span><span class="p">[</span><span class="sh">'</span><span class="s">M_score</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">final_MPOWER</span><span class="p">[</span><span class="sh">'</span><span class="s">M_score</span><span class="sh">'</span><span class="p">].</span><span class="nf">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">final_MPOWER</span><span class="p">[</span><span class="sh">'</span><span class="s">P_score</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">final_MPOWER</span><span class="p">[</span><span class="sh">'</span><span class="s">P_score</span><span class="sh">'</span><span class="p">].</span><span class="nf">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">final_MPOWER</span><span class="p">[</span><span class="sh">'</span><span class="s">O_score</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">final_MPOWER</span><span class="p">[</span><span class="sh">'</span><span class="s">O_score</span><span class="sh">'</span><span class="p">].</span><span class="nf">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">final_MPOWER</span><span class="p">[</span><span class="sh">'</span><span class="s">W_score</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">final_MPOWER</span><span class="p">[</span><span class="sh">'</span><span class="s">W_score</span><span class="sh">'</span><span class="p">].</span><span class="nf">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">final_MPOWER</span><span class="p">[</span><span class="sh">'</span><span class="s">E_score</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">final_MPOWER</span><span class="p">[</span><span class="sh">'</span><span class="s">E_score</span><span class="sh">'</span><span class="p">].</span><span class="nf">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
<span class="n">final_MPOWER</span><span class="p">[</span><span class="sh">'</span><span class="s">R_score</span><span class="sh">'</span><span class="p">]</span> <span class="o">=</span> <span class="n">final_MPOWER</span><span class="p">[</span><span class="sh">'</span><span class="s">R_score</span><span class="sh">'</span><span class="p">].</span><span class="nf">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>
</code></pre></div></div><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Sanity check
</span>
<span class="n">final_prevalence</span><span class="p">.</span><span class="nf">info</span><span class="p">()</span>
<span class="n">final_MPOWER</span><span class="p">.</span><span class="nf">info</span><span class="p">()</span>
</code></pre></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
Int64Index: 4428 entries, 0 to 4427
Data columns (total 6 columns):
 #   Column        Non-Null Count  Dtype  
---  ------        --------------  -----  
 0   Country Code  4428 non-null   object 
 1   Country       4428 non-null   object 
 2   WHO Region    4428 non-null   object 
 3   Year          4428 non-null   int64  
 4   Sex           4428 non-null   object 
 5   Prevalence    4428 non-null   float64
dtypes: float64(1), int64(1), object(4)
memory usage: 242.2+ KB
&lt;class 'pandas.core.frame.DataFrame'&gt;
Int64Index: 1560 entries, 0 to 1559
Data columns (total 10 columns):
 #   Column        Non-Null Count  Dtype 
---  ------        --------------  ----- 
 0   Country Code  1560 non-null   object
 1   Country       1560 non-null   object
 2   WHO Region    1560 non-null   object
 3   Year          1560 non-null   int64 
 4   M_score       1560 non-null   int64 
 5   P_score       1560 non-null   int64 
 6   O_score       1560 non-null   int64 
 7   W_score       1560 non-null   int64 
 8   E_score       1560 non-null   int64 
 9   R_score       1560 non-null   int64 
dtypes: int64(7), object(3)
memory usage: 134.1+ KB
</code></pre></div></div><p>Great! Now is easier to deal with the data and build the graphs to the dashboard.</p> <h3 id="4-visualizations">4. Visualizations</h3> <p>Note: Values from 2000 to 2018 are estimated based on national surveys. From 2020 to 2025 the values are projections.</p> <p>This section includes some of the visualizations, if you want to see all of them you can explore the GitHub repository.</p> <p><strong>Estimate Average Smoking Prevalence by Sex over the time</strong></p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Group by Sex and Year and calculate the mean of Prevalence
</span>
<span class="n">average_numeric_value_over_years</span> <span class="o">=</span> <span class="n">final_prevalence</span><span class="p">.</span><span class="nf">groupby</span><span class="p">([</span><span class="sh">'</span><span class="s">Sex</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Year</span><span class="sh">'</span><span class="p">])[</span><span class="sh">'</span><span class="s">Prevalence</span><span class="sh">'</span><span class="p">].</span><span class="nf">mean</span><span class="p">().</span><span class="nf">reset_index</span><span class="p">()</span>

<span class="n">pivot_table</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">pivot_table</span><span class="p">(</span>
    <span class="n">average_numeric_value_over_years</span><span class="p">,</span>
    <span class="n">values</span><span class="o">=</span><span class="sh">'</span><span class="s">Prevalence</span><span class="sh">'</span><span class="p">,</span>
    <span class="n">index</span><span class="o">=</span><span class="sh">'</span><span class="s">Year</span><span class="sh">'</span><span class="p">,</span>
    <span class="n">columns</span><span class="o">=</span><span class="sh">'</span><span class="s">Sex</span><span class="sh">'</span><span class="p">,</span>
    <span class="n">aggfunc</span><span class="o">=</span><span class="sh">'</span><span class="s">mean</span><span class="sh">'</span>
<span class="p">)</span>

<span class="n">pivot_table</span><span class="p">.</span><span class="nf">reset_index</span><span class="p">(</span><span class="n">inplace</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="p">.</span><span class="nf">line</span><span class="p">(</span>
    <span class="n">pivot_table</span><span class="p">,</span>
    <span class="n">x</span><span class="o">=</span><span class="sh">'</span><span class="s">Year</span><span class="sh">'</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="n">pivot_table</span><span class="p">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span>  
    <span class="n">title</span><span class="o">=</span><span class="sh">'</span><span class="s">Estimate Average Smoking Prevalence by Sex over the time</span><span class="sh">'</span>
<span class="p">)</span>

<span class="n">fig</span><span class="p">.</span><span class="nf">update_layout</span><span class="p">(</span>
    <span class="n">xaxis_title</span><span class="o">=</span><span class="sh">'</span><span class="s">Year</span><span class="sh">'</span><span class="p">,</span>
    <span class="n">yaxis_title</span><span class="o">=</span><span class="sh">'</span><span class="s">Prevalence (%)</span><span class="sh">'</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">fig</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>

</code></pre></div></div><p><img src="attachment:sexcategory.png" alt="sexcategory.png" /></p> <ul> <li>Estimate prevalence in males is ~3 times bigger than in females group.</li> <li>The trend in the prevalence by sex groups is to decline. The prevalence projected by 2025 is ~15% lesss than the estimation in 2020. Females are expected to have a reduction of 6% in 2025.</li> </ul> <p><strong>Estimate Average Smoking Prevalence by Country over the years</strong></p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Sort the dataframe by Year in ascending order
</span><span class="n">aggregated_data</span> <span class="o">=</span> <span class="n">final_prevalence</span><span class="p">.</span><span class="nf">sort_values</span><span class="p">(</span><span class="sh">'</span><span class="s">Year</span><span class="sh">'</span><span class="p">)</span>

<span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="p">.</span><span class="nf">choropleth</span><span class="p">(</span>
    <span class="n">aggregated_data</span><span class="p">,</span>
    <span class="n">locations</span><span class="o">=</span><span class="sh">'</span><span class="s">Country</span><span class="sh">'</span><span class="p">,</span>  
    <span class="n">locationmode</span><span class="o">=</span><span class="sh">'</span><span class="s">country names</span><span class="sh">'</span><span class="p">,</span>  
    <span class="n">color</span><span class="o">=</span><span class="sh">'</span><span class="s">Prevalence</span><span class="sh">'</span><span class="p">,</span>  
    <span class="n">hover_name</span><span class="o">=</span><span class="sh">'</span><span class="s">Country</span><span class="sh">'</span><span class="p">,</span>  
    <span class="n">animation_frame</span><span class="o">=</span><span class="sh">'</span><span class="s">Year</span><span class="sh">'</span><span class="p">,</span>  
    <span class="n">color_continuous_scale</span><span class="o">=</span><span class="sh">'</span><span class="s">Viridis_r</span><span class="sh">'</span><span class="p">,</span> 
    <span class="n">title</span><span class="o">=</span><span class="sh">'</span><span class="s">Estimate Average Smoking Prevalence by Country over the years</span><span class="sh">'</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">fig</span><span class="p">.</span><span class="nf">update_geos</span><span class="p">(</span>
    <span class="n">showcoastlines</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">coastlinecolor</span><span class="o">=</span><span class="sh">'</span><span class="s">RebeccaPurple</span><span class="sh">'</span><span class="p">,</span>
    <span class="n">showland</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">landcolor</span><span class="o">=</span><span class="sh">'</span><span class="s">LightGrey</span><span class="sh">'</span><span class="p">,</span>
    <span class="n">showocean</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
    <span class="n">oceancolor</span><span class="o">=</span><span class="sh">'</span><span class="s">LightBlue</span><span class="sh">'</span><span class="p">,</span>
    <span class="n">projection_type</span><span class="o">=</span><span class="sh">'</span><span class="s">natural earth</span><span class="sh">'</span><span class="p">,</span>  
<span class="p">)</span>

<span class="n">fig</span><span class="p">.</span><span class="nf">update_layout</span><span class="p">(</span>
    <span class="n">geo</span><span class="o">=</span><span class="nf">dict</span><span class="p">(</span><span class="n">showframe</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">showcoastlines</span><span class="o">=</span><span class="bp">False</span><span class="p">),</span>
    <span class="n">coloraxis_colorbar</span><span class="o">=</span><span class="nf">dict</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="sh">'</span><span class="s">Prevalence (%)</span><span class="sh">'</span><span class="p">),</span>
<span class="p">)</span>

<span class="n">fig</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>
</code></pre></div></div><p><img src="attachment:choropleth.png" alt="choropleth.png" /></p> <p><strong>Estimate Average Smoking Prevalence by WHO Region</strong></p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Group by WHO Region and calculate the mean of Estimate Average Smoking Prevalence
</span><span class="n">average_numeric_value</span> <span class="o">=</span> <span class="n">final_prevalence</span><span class="p">.</span><span class="nf">groupby</span><span class="p">(</span><span class="sh">'</span><span class="s">WHO Region</span><span class="sh">'</span><span class="p">)[</span><span class="sh">'</span><span class="s">Prevalence</span><span class="sh">'</span><span class="p">].</span><span class="nf">mean</span><span class="p">()</span>
</code></pre></div></div><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Estimate Average Smoking Prevalence by WHO Region
</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="p">.</span><span class="nf">bar</span><span class="p">(</span>
    <span class="n">x</span><span class="o">=</span><span class="n">average_numeric_value</span><span class="p">.</span><span class="n">index</span><span class="p">,</span> 
    <span class="n">y</span><span class="o">=</span><span class="n">average_numeric_value</span><span class="p">.</span><span class="n">values</span><span class="p">,</span>
    <span class="n">color</span><span class="o">=</span><span class="n">average_numeric_value</span><span class="p">.</span><span class="n">index</span><span class="p">,</span>
    <span class="n">labels</span><span class="o">=</span><span class="p">{</span><span class="sh">'</span><span class="s">x</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">WHO Region</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">y</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">Estimated Prevalence</span><span class="sh">'</span><span class="p">},</span>
    <span class="n">title</span><span class="o">=</span><span class="sh">'</span><span class="s">Estimate Average Smoking Prevalence by WHO Region</span><span class="sh">'</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">fig</span><span class="p">.</span><span class="nf">update_layout</span><span class="p">(</span>
    <span class="n">xaxis_title</span><span class="o">=</span><span class="sh">'</span><span class="s">WHO Region</span><span class="sh">'</span><span class="p">,</span>
    <span class="n">yaxis_title</span><span class="o">=</span><span class="sh">'</span><span class="s">Estimated Prevalence (%)</span><span class="sh">'</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">fig</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>

</code></pre></div></div><p><img src="attachment:whoregions.png" alt="whoregions.png" /></p> <p><strong>Get country MPOWER data function</strong></p> <p>Writting a function to get the indicator value for each country:</p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">get_country_data</span><span class="p">(</span><span class="n">final_MPOWER</span><span class="p">,</span> <span class="n">country</span><span class="p">):</span>
    
    <span class="n">country_data</span> <span class="o">=</span> <span class="n">final_MPOWER</span><span class="p">[</span><span class="n">final_MPOWER</span><span class="p">[</span><span class="sh">'</span><span class="s">Country</span><span class="sh">'</span><span class="p">]</span> <span class="o">==</span> <span class="n">country</span><span class="p">]</span> 
    <span class="k">if</span> <span class="n">country_data</span><span class="p">.</span><span class="n">empty</span><span class="p">:</span>
        <span class="k">return</span> <span class="sa">f</span><span class="sh">'</span><span class="s">wrong spelling or </span><span class="sh">"</span><span class="s">No data available for </span><span class="si">{</span><span class="n">country</span><span class="si">}</span><span class="sh">'</span>  
    
    <span class="n">specific_data</span> <span class="o">=</span> <span class="n">country_data</span><span class="p">[[</span><span class="sh">'</span><span class="s">Country</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Year</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">M_score</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">P_score</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">O_score</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">W_score</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">E_score</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">R_score</span><span class="sh">'</span> <span class="p">]]</span>

    <span class="k">return</span> <span class="n">specific_data</span>
</code></pre></div></div><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">result</span> <span class="o">=</span> <span class="nf">get_country_data</span><span class="p">(</span><span class="n">final_MPOWER</span><span class="p">,</span> <span class="sh">'</span><span class="s">Canada</span><span class="sh">'</span><span class="p">)</span>
<span class="n">result</span>
</code></pre></div></div><div> <style scoped=""> .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } </style> <table border="1" class="dataframe"> <thead> <tr style="text-align: right;"> <th></th> <th>Country</th> <th>Year</th> <th>M_score</th> <th>P_score</th> <th>O_score</th> <th>W_score</th> <th>E_score</th> <th>R_score</th> </tr> </thead> <tbody> <tr> <th>232</th> <td>Canada</td> <td>2007</td> <td>4</td> <td>5</td> <td>3</td> <td>4</td> <td>2</td> <td>0</td> </tr> <tr> <th>233</th> <td>Canada</td> <td>2008</td> <td>4</td> <td>5</td> <td>5</td> <td>4</td> <td>2</td> <td>4</td> </tr> <tr> <th>234</th> <td>Canada</td> <td>2010</td> <td>4</td> <td>5</td> <td>5</td> <td>4</td> <td>4</td> <td>4</td> </tr> <tr> <th>235</th> <td>Canada</td> <td>2012</td> <td>4</td> <td>5</td> <td>5</td> <td>5</td> <td>4</td> <td>4</td> </tr> <tr> <th>236</th> <td>Canada</td> <td>2014</td> <td>4</td> <td>5</td> <td>5</td> <td>5</td> <td>4</td> <td>4</td> </tr> <tr> <th>237</th> <td>Canada</td> <td>2016</td> <td>4</td> <td>5</td> <td>5</td> <td>5</td> <td>4</td> <td>4</td> </tr> <tr> <th>238</th> <td>Canada</td> <td>2018</td> <td>4</td> <td>5</td> <td>5</td> <td>5</td> <td>4</td> <td>4</td> </tr> <tr> <th>239</th> <td>Canada</td> <td>2020</td> <td>4</td> <td>5</td> <td>5</td> <td>5</td> <td>4</td> <td>4</td> </tr> </tbody> </table></div><p><strong>Relation Smoking Prevalence vs Premature Deaths by Noncommunicable Diseases (NDC)</strong> (proportion among all NCD)</p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Merging data to the scatterplot 
</span><span class="n">scatter_data</span> <span class="o">=</span> <span class="n">pd</span><span class="p">.</span><span class="nf">merge</span><span class="p">(</span><span class="n">final_prevalence</span><span class="p">,</span> <span class="n">final_premature_deaths</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="sh">'</span><span class="s">Country Code</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Country</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">WHO Region</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Year</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Sex</span><span class="sh">'</span><span class="p">])</span>
<span class="n">scatter_data</span>
</code></pre></div></div><div> <style scoped=""> .dataframe tbody tr th:only-of-type { vertical-align: middle; } .dataframe tbody tr th { vertical-align: top; } .dataframe thead th { text-align: right; } </style> <table border="1" class="dataframe"> <thead> <tr style="text-align: right;"> <th></th> <th>Country Code</th> <th>Country</th> <th>WHO Region</th> <th>Year</th> <th>Sex</th> <th>Prevalence</th> <th>PrematureDeaths/NCD</th> </tr> </thead> <tbody> <tr> <th>0</th> <td>AFG</td> <td>Afghanistan</td> <td>Eastern Mediterranean</td> <td>2005</td> <td>BTSX</td> <td>17.1</td> <td>71.98372</td> </tr> <tr> <th>1</th> <td>AFG</td> <td>Afghanistan</td> <td>Eastern Mediterranean</td> <td>2005</td> <td>MLE</td> <td>27.5</td> <td>74.25545</td> </tr> <tr> <th>2</th> <td>AFG</td> <td>Afghanistan</td> <td>Eastern Mediterranean</td> <td>2005</td> <td>FMLE</td> <td>6.7</td> <td>69.67499</td> </tr> <tr> <th>3</th> <td>AFG</td> <td>Afghanistan</td> <td>Eastern Mediterranean</td> <td>2010</td> <td>BTSX</td> <td>14.0</td> <td>70.07750</td> </tr> <tr> <th>4</th> <td>AFG</td> <td>Afghanistan</td> <td>Eastern Mediterranean</td> <td>2010</td> <td>MLE</td> <td>23.4</td> <td>72.69907</td> </tr> <tr> <th>...</th> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> <td>...</td> </tr> <tr> <th>2839</th> <td>ZWE</td> <td>Zimbabwe</td> <td>Africa</td> <td>2019</td> <td>FMLE</td> <td>0.9</td> <td>56.25971</td> </tr> <tr> <th>2840</th> <td>ZWE</td> <td>Zimbabwe</td> <td>Africa</td> <td>2000</td> <td>BTSX</td> <td>19.5</td> <td>56.86102</td> </tr> <tr> <th>2841</th> <td>ZWE</td> <td>Zimbabwe</td> <td>Africa</td> <td>2000</td> <td>MLE</td> <td>36.1</td> <td>59.35542</td> </tr> <tr> <th>2842</th> <td>ZWE</td> <td>Zimbabwe</td> <td>Africa</td> <td>2000</td> <td>FMLE</td> <td>2.9</td> <td>54.56320</td> </tr> <tr> <th>2843</th> <td>ZWE</td> <td>Zimbabwe</td> <td>Africa</td> <td>2015</td> <td>FMLE</td> <td>1.2</td> <td>58.01034</td> </tr> </tbody> </table> <p>2844 rows × 7 columns</p></div><p><strong>Pearson Correlation Coefficient (Pearson’s r)</strong></p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">scipy</span> <span class="kn">import</span> <span class="n">stats</span>

<span class="n">prevalence</span> <span class="o">=</span> <span class="n">scatter_data</span><span class="p">[</span><span class="sh">'</span><span class="s">Prevalence</span><span class="sh">'</span><span class="p">]</span>
<span class="n">deaths</span> <span class="o">=</span> <span class="n">scatter_data</span><span class="p">[</span><span class="sh">'</span><span class="s">PrematureDeaths/NCD</span><span class="sh">'</span><span class="p">]</span>

<span class="n">pearson_corr</span> <span class="o">=</span> <span class="n">stats</span><span class="p">.</span><span class="nf">pearsonr</span><span class="p">(</span><span class="n">prevalence</span><span class="p">,</span> <span class="n">deaths</span><span class="p">)</span>
<span class="n">pearson_corr</span>
</code></pre></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PearsonRResult(statistic=-0.09868028979854496, pvalue=1.3413969700439424e-07)
</code></pre></div></div><p>The correlation between these two variables suggests a weak negative correlation statistically significant.</p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Scatterplot of Smoking Prevalence vs Premature Deaths
</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">px</span><span class="p">.</span><span class="nf">scatter</span><span class="p">(</span>
    <span class="n">scatter_data</span><span class="p">,</span>
    <span class="n">x</span><span class="o">=</span><span class="sh">'</span><span class="s">Prevalence</span><span class="sh">'</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="sh">'</span><span class="s">PrematureDeaths/NCD</span><span class="sh">'</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="sh">'</span><span class="s">Relation Smoking Prevalence vs Premature Deaths by NCD (proportion among all NCD)</span><span class="sh">'</span><span class="p">,</span>
    <span class="n">labels</span><span class="o">=</span><span class="p">{</span><span class="sh">'</span><span class="s">Prevalence</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">Smoking Prevalence</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">PrematureDeaths/NCD</span><span class="sh">'</span><span class="p">:</span> <span class="sh">'</span><span class="s">Premature Deaths</span><span class="sh">'</span><span class="p">},</span>
    <span class="n">animation_frame</span><span class="o">=</span><span class="sh">'</span><span class="s">Year</span><span class="sh">'</span><span class="p">,</span>
    <span class="n">color</span> <span class="o">=</span> <span class="sh">'</span><span class="s">WHO Region</span><span class="sh">'</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="mi">850</span><span class="p">,</span> 
    <span class="n">height</span><span class="o">=</span><span class="mi">850</span> 
<span class="p">)</span>

<span class="c1"># Set fixed axis ranges
</span><span class="n">fig</span><span class="p">.</span><span class="nf">update_xaxes</span><span class="p">(</span><span class="nb">range</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">])</span>
<span class="n">fig</span><span class="p">.</span><span class="nf">update_yaxes</span><span class="p">(</span><span class="nb">range</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">])</span>

<span class="c1"># Show the plot
</span><span class="n">fig</span><span class="p">.</span><span class="nf">show</span><span class="p">()</span>
</code></pre></div></div><p><img src="attachment:scatterplot.png" alt="scatterplot.png" /></p> <h3 id="5-design-the-dashboard">5. Design the Dashboard</h3> <p>Now let’s write the csv files to work with them in the python script where the application is going to be defined.</p><div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># final_prevalence.to_csv('final_prevalence.csv')
# final_premature_deaths.to_csv('final_premature_deaths.csv')
# final_MPOWER.to_csv('final_MPOWER.csv')
# scatter_data.to_csv('scatter_data.csv')
</span></code></pre></div></div><p>I’m going to create a Python script for building the dashboard using the Dash framework.</p> <p>I chose Dash for building the dashboard due to its seamless integration with Python and its ability to create interactive web applications for data visualization with relative ease. Dash’s Python-centric approach means I can leverage my existing Python programming skills without having to learn new languages. Its declarative syntax for defining the layout and interactions simplifies the development process. Additionally, Dash offers a wide range of pre-built components for creating charts, graphs, and interactive elements, reducing the need for extensive custom coding. The framework’s active community and extensive documentation provide a wealth of resources to troubleshoot issues and learn best practices. Overall, Dash’s combination of simplicity, versatility, and compatibility with Python makes it a powerful choice for rapidly developing engaging and interactive dashboards.</p> <p><strong>Overal Process View</strong></p> <p>First, I’ll make sure I have Dash installed. Then, I’ll set up my Python script, which I’ll name <code class="language-plaintext highlighter-rouge">application.py</code>, and import the necessary libraries. With the app initialized, I’ll define the layout using HTML and Dash components, structuring the interface the way I want it. To make the dashboard interactive, I’ll use callbacks that respond to user inputs and update the displayed content accordingly. Once everything is set up, I’ll run the app command and access it through my web browser. This process will allow me to create a dynamic and interactive dashboard for data visualization and analysis.</p> <h4 id="dashboard-description">Dashboard description</h4> <p>As I explained, after connecting with GHO API, the exploration derived in the building of the dashboard: <strong>Global Tobacco Insights: Visualizing Smoking Trends, Health Consequences, and Control Policies</strong> a dashboard that display important information about Smoking Prevalence by sex, countries and WHO regions, the relationship between smoking rates and premature deaths caused by non-communicable diseases (NCDs), and the efforts being undertaken by the countries to accomplish the MPOWER strategy.</p> <p>The dashboard provides insights into the challenges and successes of addressing smoking on a global scale. It highlights regions striving for improved public health and emphasizes the commitment of the global community to tackle this critical issue. Nevertheless, this project also underscored the need for additional data to gain a more comprehensive understanding of the smoking landscape. This is particularly critical given that the most recent data available from the Global Health Observatory (GHO) for constructing this project dates back to 2020.</p> <p>Personal comment: The subjective perception doesn’t align with reality either, as it assumes that I live in a country with a low smoking prevalence. However, my personal experience contradicts this assumption, as I regularly encounter situations where I inhale secondhand smoke from individuals on the streets, which wouldn’t be expected in a country with such low prevalence and really good Scores in Protecting strategy. This situation prompts me to consider the possibility that we might not be accurately measuring the actual consumption rates and policies accomplishment. Absolutely, there is a clear need for more data and dedicated efforts to address this public health issue.</p> <h3 id="6-deploy-the-dashboard">6. Deploy the Dashboard</h3> <p>I’ll start by pushing my <code class="language-plaintext highlighter-rouge">application.py</code> script and all the project files to this repository. To ensure a clean and reproducible environment, I’ll include a <code class="language-plaintext highlighter-rouge">requirements.txt</code> file listing all the dependencies, including Dash and other libraries used in the project.</p> <p>Next, I’ll utilize EC2 AWS instance to deploy the dashboard. I’ll create the instance and configure it to host the app.</p> <h4 id="steps-to-deploy-the-dash-application-using-ec2-aws-instance">Steps to deploy the dash application using EC2 AWS instance</h4> <ol> <li>Log in on AWS.</li> <li>Select in <code class="language-plaintext highlighter-rouge">Services</code>: <code class="language-plaintext highlighter-rouge">EC2</code></li> <li>Launch a new instance and choose an Amazon Machine Image on your convenience, I chose a AMI and instance type with free tier because its capacity was enough for deploying my project.</li> <li>If you have not connected before with AWS you will need to create the Key Pair.</li> <li>When instance state be <code class="language-plaintext highlighter-rouge">Running</code> go to <code class="language-plaintext highlighter-rouge">instance settings</code> -&gt; <code class="language-plaintext highlighter-rouge">Security</code> and change the include a new <code class="language-plaintext highlighter-rouge">port</code>. My case the new port was 8050 as that was the port dash used to deploy the app.</li> <li>Connect to your instance using SSH protocol.</li> <li>Install the require libraries in your instance.</li> <li>Move your the files you require to run your app to your instance, I cloned the repository in my instance.</li> <li>I had to include Flask in my .py script and modify the code to access Dash app using the external IP address or domain name of the EC2 instance.</li> <li>Run the application in your instance.</li> <li>In Instance <code class="language-plaintext highlighter-rouge">Details</code> you will find the <code class="language-plaintext highlighter-rouge">Public IPv4 address</code>, add <code class="language-plaintext highlighter-rouge">:8050</code> to that address to see the application running.</li> <li>Install TMUX library and <code class="language-plaintext highlighter-rouge">Detach</code> the dash session to keep the app running even when you disconnect from the instance.</li> </ol> <h2 id="application-link">Application link</h2> <p><a href="http://18.216.161.201:8050/">Access the dashboard here</a></p> <h2 id="sources">Sources</h2> <ul> <li><a href="https://www.who.int/data/gho/info/gho-odata-api">Global Health Observatory</a></li> <li><a href="https://www.who.int/data/gho/info/gho-odata-api">GHO OData API</a></li> <li><a href="https://www.who.int/initiatives/mpower">World Health Organization - MPOWER measures</a></li> <li><a href="https://www.canada.ca/en/health-canada/services/publications/healthy-living/canada-tobacco-strategy.html">Canada’s Tobacco Strategy</a></li> </ul> <h2 id="acknowledgments">Acknowledgments</h2> <ul> <li>Dash Python User Guide: Dash is the original low-code framework for rapidly building data apps in Python. <a href="https://dash.plotly.com/">Learn more here</a></li> <li>Dash Bootstrap Components: dash-bootstrap-components is a library of Bootstrap components for Plotly Dash, that makes it easier to build consistently styled apps with complex, responsive layouts. <a href="https://dash-bootstrap-components.opensource.faculty.ai/">Learn more here</a></li> <li>Rahul Agarwal <a href="https://towardsdatascience.com/how-to-deploy-a-streamlit-app-using-an-amazon-free-ec2-instance-416a41f69dc3">How to Deploy a Streamlit App using an Amazon Free ec2 instance?</a></li> </ul> </article></div><hr class="dashed" /><div class="container"><div class="row" data-aos="fade-up"><div class="col-md-12"><div class="share-box"> <i class="fa fa-share-alt" aria-hidden="true"></i> <a class="f nostyle" href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000" onclick="window.open(this.href, 'mywin', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" ><i class="fa fa-facebook-official fa"></i ></a> <a class="t nostyle" href="https://twitter.com/intent/tweet?text=&url=http://localhost:4000" onclick="window.open(this.href, 'mywin', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" ><i class="fa fa-twitter fa"></i ></a> <a class="g nostyle" href="https://plus.google.com/share?url=http://localhost:4000" onclick="window.open(this.href, 'mywin', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" ><i class="fa fa-google-plus fa"></i ></a> <a class="r nostyle" href="http://www.reddit.com/submit?url=http://localhost:4000" onclick="window.open(this.href, 'mywin', 'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;" ><i class="fa fa-reddit fa"></i ></a> <a class="l nostyle" href="https://www.linkedin.com/shareArticle?mini=true&url=http://localhost:4000&title=&summary=&source=webjeda" onclick="window.open(this.href, 'mywin', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" ><i class="fa fa-linkedin fa"></i ></a> <a class="e nostyle" href="mailto:?subject=&amp;body=Check&amp;out&amp;this&amp;site&amp;http://localhost:4000" ><i class="fa fa-envelope fa"></i ></a></div></div></div><div class="row"><div class="col-md-12"> <p class="categories" data-aos="fade-up"> </p></div></div><div class="recent" data-aos="fade-up"><div class=""> <h3>Recent Articles</h3></div><div class="recent-grid"><div class="items" data-aos="fade-up"> <a class="nostyle item" href="/blog/blackcurrant/"><div class="cards"><div class="image rounded" style="background-image: url(/assets/images/datascience.png)" ></div><p class="title"><small>What is data science</small></p></div></a></div><div class="items" data-aos="fade-up"> <a class="nostyle item" href="/blog/designing-a-flag/"><div class="cards"><div class="image rounded" style="background-image: url(/assets/images/brain1.png)" ></div><p class="title"><small>A mind for numbers</small></p></div></a></div></div></div></div></main><div id="search-container"></div><hr class="dashed" /></div></div></div></div><script src="/assets/js/jQuery.min.js"></script><script> $(document).ready(function () { $(".loader").hide(); });</script><script> (function () { var css = document.createElement("link"); css.href = "/assets/font-awesome-4.7.0/css/font-awesome.min.css"; css.rel = "stylesheet"; css.type = "text/css"; document.getElementsByTagName("head")[0].appendChild(css); })();</script><noscript><link rel="stylesheet" href="/assets/font-awesome-4.7.0/css/font-awesome.min.css" /> </noscript><script> $("#search-input").keyup(function () { $("main").hide(); $("search-container").show(); if (!$("#search-input").val()) { $("main").show(); $("search-container").hide(); } });</script><script src="/assets/js/jekyll-search.min.js"></script><script> SimpleJekyllSearch({ searchInput: document.getElementById("search-input"), resultsContainer: document.getElementById("search-container"), searchResultTemplate: '<a class="nostyle" href="{url}"><div class="blog borders cards"><div class="image" style="background-image: url({image});"></div><div class="content"><h3 class="title">{title}</h3><p class="description">{description}</p></div></div></a>', noResultsText: "No results found", json: "/search.json", });</script><script> (function () { var css = document.createElement("link"); css.href = "https://unpkg.com/aos@2.3.1/dist/aos.css"; css.rel = "stylesheet"; css.type = "text/css"; document.getElementsByTagName("head")[0].appendChild(css); })();</script><noscript><link rel="stylesheet" href="/assets/animate-on-scroll/aos.min.css" /> </noscript><script src="/assets/animate-on-scroll/aos.min.js"></script><script> AOS.init({ duration: 600, once: true, disable: "mobile", });</script></body></html>